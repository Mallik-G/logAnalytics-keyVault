# Using Log Analytics to monitor Azure Key Vault

In this repo you can find the following artifacts:

* [akv.sh](akv.sh): shell script with a wrapper on Azure CLI to perform a series on ops on Azure Key Vault (such as create 100 secrets, read 100 secrets or delete 100 secrets, where 100 is a variable you can change)
* [loop.sh](loop.sh): another shell script that loops on the previous one, to create continuous load on an Azure Key Vault. The loop script will run these operations:
  - Create 20 secrets
  - Read 30 secrets (trying to read the last 10 secrets will generate an error, since only 20 were created)
  - Delete the 20 secrets created
* [AKVdashboard.json](AKVdashboard.json): ARM template to deploy a dashboard with information extrated via Log Analytics queries
* [deploy-dashboard.sh](deploy-dashboard.sh): example script to deploy the ARM

Here you have a snapshot of the dashboard generated by the template, after letting the loop.sh script run for a while:

![dashboard](dashboard_screenshot.jpg "Dashboard with Azure Key Vault infos")
